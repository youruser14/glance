const itemCardData = [
    {
        itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
        itemPhotos: {
            firstItemPhoto: 'appleIPhone12-64',
            secondItemPhoto: 'appleIPhone14-128',
            thirditemPhoto: 'huaweiNovaY61-128'
        },
        itemDiscount: '- 4 %',
        mainPrice: '84 999',
        discountPrice: '87 999',
        availability: 'В наличии'
    },
    {
        itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
        itemPhotos: {
            firstItemPhoto: 'appleIPhone12-64',
            secondItemPhoto: 'appleIPhone14-128',
            thirditemPhoto: 'huaweiNovaY61-128'
        },
        itemDiscount: '- 4 %',
        mainPrice: '84 999',
        discountPrice: '87 999',
        availability: 'В наличии'
    },
    {
        itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
        itemPhotos: {
            firstItemPhoto: 'appleIPhone12-64',
            secondItemPhoto: 'appleIPhone14-128',
            thirditemPhoto: 'huaweiNovaY61-128'
        },
        itemDiscount: '- 4 %',
        mainPrice: '84 999',
        discountPrice: '87 999',
        availability: 'В наличии'
    },
    {
        itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
        itemPhotos: {
            firstItemPhoto: 'appleIPhone12-64',
            secondItemPhoto: 'appleIPhone14-128',
            thirditemPhoto: 'huaweiNovaY61-128'
        },
        itemDiscount: '- 4 %',
        mainPrice: '84 999',
        discountPrice: '87 999',
        availability: 'В наличии'
    },
    {
        itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
        itemPhotos: {
            firstItemPhoto: 'appleIPhone12-64',
            secondItemPhoto: 'appleIPhone14-128',
            thirditemPhoto: 'huaweiNovaY61-128'
        },
        itemDiscount: '- 4 %',
        mainPrice: '84 999',
        discountPrice: '87 999',
        availability: 'В наличии'
    },
    {
        itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
        itemPhotos: {
            firstItemPhoto: 'appleIPhone12-64',
            secondItemPhoto: 'appleIPhone14-128',
            thirditemPhoto: 'huaweiNovaY61-128'
        },
        itemDiscount: '- 4 %',
        mainPrice: '84 999',
        discountPrice: '87 999',
        availability: 'В наличии'
    },
    {
        itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
        itemPhotos: {
            firstItemPhoto: 'appleIPhone12-64',
            secondItemPhoto: 'appleIPhone14-128',
            thirditemPhoto: 'huaweiNovaY61-128'
        },
        itemDiscount: '- 4 %',
        mainPrice: '84 999',
        discountPrice: '87 999',
        availability: 'В наличии'
    },
    {
        itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
        itemPhotos: {
            firstItemPhoto: 'appleIPhone12-64',
            secondItemPhoto: 'appleIPhone14-128',
            thirditemPhoto: 'huaweiNovaY61-128'
        },
        itemDiscount: '- 4 %',
        mainPrice: '84 999',
        discountPrice: '87 999',
        availability: 'В наличии'
    },
    {
        itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
        itemPhotos: {
            firstItemPhoto: 'appleIPhone12-64',
            secondItemPhoto: 'appleIPhone14-128',
            thirditemPhoto: 'huaweiNovaY61-128'
        },
        itemDiscount: '- 4 %',
        mainPrice: '84 999',
        discountPrice: '87 999',
        availability: 'В наличии'
    }
]

// const itemCardData = [
//     {
//         itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
//         itemPhotos: {
            
//             promotionImgFirst: 'appleIPhone12-64', 
//             promotionImgSecond: 'appleIPhone14-128', 
//             promotionImgThird: 'huaweiNovaY61-128'
//     },
//         itemDiscount: '- 4 %',
//         mainPrice: '84 999',
//         discountPrice: '87 999',
//         availability: 'В наличии'
//     },
//     {
//         itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
//         itemPhotos: {
//             promotionImgFirst: 'appleIPhone12-64', 
//             promotionImgSecond: 'appleIPhone14-128', 
//             promotionImgThird: 'huaweiNovaY61-128'
//     },
//         itemDiscount: '- 4 %',
//         mainPrice: '84 999',
//         discountPrice: '87 999',
//         availability: 'В наличии'
//     },
//     {
//         itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
//         itemPhotos: {
            
//             promotionImgFirst: 'appleIPhone12-64', 
//             promotionImgSecond: 'appleIPhone14-128', 
//             promotionImgThird: 'huaweiNovaY61-128'
//     },
//         itemDiscount: '- 4 %',
//         mainPrice: '84 999',
//         discountPrice: '87 999',
//         availability: 'В наличии'
//     },
//     {
//         itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
//         itemPhotos: {
            
//             promotionImgFirst: 'appleIPhone12-64', 
//             promotionImgSecond: 'appleIPhone14-128', 
//             promotionImgThird: 'huaweiNovaY61-128'
//     },
//         itemDiscount: '- 4 %',
//         mainPrice: '84 999',
//         discountPrice: '87 999',
//         availability: 'В наличии'
//     },
//     {
//         itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
//         itemPhotos: {
            
//             promotionImgFirst: 'appleIPhone12-64', 
//             promotionImgSecond: 'appleIPhone14-128', 
//             promotionImgThird: 'huaweiNovaY61-128'
//     },
//         itemDiscount: '- 4 %',
//         mainPrice: '84 999',
//         discountPrice: '87 999',
//         availability: 'В наличии'
//     },
//     {
//         itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
//         itemPhotos: {
            
//             promotionImgFirst: 'appleIPhone12-64', 
//             promotionImgSecond: 'appleIPhone14-128', 
//             promotionImgThird: 'huaweiNovaY61-128'
//     },
//         itemDiscount: '- 4 %',
//         mainPrice: '84 999',
//         discountPrice: '87 999',
//         availability: 'В наличии'
//     },
//     {
//         itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
//         itemPhotos: {
            
//             promotionImgFirst: 'appleIPhone12-64', 
//             promotionImgSecond: 'appleIPhone14-128', 
//             promotionImgThird: 'huaweiNovaY61-128'
//     },
//         itemDiscount: '- 4 %',
//         mainPrice: '84 999',
//         discountPrice: '87 999',
//         availability: 'В наличии'
//     },
//     {
//         itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
//         itemPhotos: {
            
//             promotionImgFirst: 'appleIPhone12-64', 
//             promotionImgSecond: 'appleIPhone14-128', 
//             promotionImgThird: 'huaweiNovaY61-128'
//     },
//         itemDiscount: '- 4 %',
//         mainPrice: '84 999',
//         discountPrice: '87 999',
//         availability: 'В наличии'
//     },
//     {
//         itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
//         itemPhotos: {
            
//             promotionImgFirst: 'appleIPhone12-64', 
//             promotionImgSecond: 'appleIPhone14-128', 
//             promotionImgThird: 'huaweiNovaY61-128'
//     },
//         itemDiscount: '- 4 %',
//         mainPrice: '84 999',
//         discountPrice: '87 999',
//         availability: 'В наличии'
//     },
//     {
//         itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
//         itemPhotos: {
            
//             promotionImgFirst: 'appleIPhone12-64', 
//             promotionImgSecond: 'appleIPhone14-128', 
//             promotionImgThird: 'huaweiNovaY61-128'
//     },
//         itemDiscount: '- 4 %',
//         mainPrice: '84 999',
//         discountPrice: '87 999',
//         availability: 'В наличии'
//     },
//     {
//         itemCardTitle: 'Смартфон Apple iPhone 14 128GB',
//         itemPhotos: {
            
//             promotionImgFirst: 'appleIPhone12-64', 
//             promotionImgSecond: 'appleIPhone14-128', 
//             promotionImgThird: 'huaweiNovaY61-128'
//     },
//         itemDiscount: '- 4 %',
//         mainPrice: '84 999',
//         discountPrice: '87 999',
//         availability: 'В наличии'
//     }
// ]


const $promotionWrapper = document.querySelector('.promotion-wrapper');

for (let item of itemCardData) {
    const $promotionItemBox = document.createElement('div');
    $promotionItemBox.classList.add('promotion-item__box');
    const $itemPicture = document.createElement('div');
    $itemPicture.classList.add('item-picture');
    const $sliderPhotosItems = document.createElement('div');
    $sliderPhotosItems.classList.add('slider-photos__items');

    // for (let image of item.itemPhotos) {
    //     const $promotionImg = document.createElement('img');
    //     $promotionImg.src = `images/promotion/${image}.png`
    //     $sliderPhotosItems.append($promotionImg)
    //     console.log(image);
    // }

    const $promotionImgFirst = document.createElement('img');
    $promotionImgFirst.classList.add('promotion-img', 'promotion-img__block');
    $promotionImgFirst.src = `images/promotion/${item.itemPhotos.firstItemPhoto}.png`

    const $promotionImgSecond = document.createElement('img');
    $promotionImgSecond.classList.add('promotion-img');
    $promotionImgSecond.src = `images/promotion/${item.itemPhotos.secondItemPhoto}.png`;

    const $promotionImgThird = document.createElement('img');
    $promotionImgThird.classList.add('promotion-img');
    $promotionImgThird.src = `images/promotion/${item.itemPhotos.thirditemPhoto}.png`;

    

    const $percentBox = document.createElement('div');
    $percentBox.classList.add('percent-box');
    $percentBox.textContent = item.itemDiscount;

    const $dotWrapper = document.createElement('div');
    $dotWrapper.classList.add('dot-wrapper');

    const $promotionTitle = document.createElement('h1');
    $promotionTitle.classList.add('promotion-title');
    $promotionTitle.textContent = item.itemCardTitle;

    const $promotionPrice = document.createElement('div');
    $promotionPrice.classList.add('promotion-price');

    const $mainPrice = document.createElement('h1');
    $mainPrice.classList.add('main-price');
    $mainPrice.textContent = item.mainPrice + ' ₽';

    const $discountPrice = document.createElement('h3');
    $discountPrice.classList.add('discount-price');
    $discountPrice.textContent = item.discountPrice + ' ₽';
    
    const $favoritesInfo = document.createElement('div');
    $favoritesInfo.classList.add('favorites-info');

    const $availability = document.createElement('p');
    $availability.classList.add('availability');
    $availability.textContent = item.availability;

    const $favoritesBtn = document.createElement('button');
    $favoritesBtn.classList.add('favorites-btn');

    const $favoritesBtnImg = document.createElement('img');
    $favoritesBtnImg.classList.add('favorites-btn__img');
    $favoritesBtnImg.src = `/images/favorites.png`

    const $promotionBtn = document.createElement('button');
    $promotionBtn.classList.add('promotion-btn');
    $promotionBtn.textContent = 'В корзину';

    $promotionWrapper.append($promotionItemBox);
    $promotionItemBox.append($itemPicture);
    $itemPicture.append($sliderPhotosItems);
    $sliderPhotosItems.append($promotionImgFirst);
    $sliderPhotosItems.append($promotionImgSecond);
    $sliderPhotosItems.append($promotionImgThird);
    $itemPicture.append($percentBox);
    $promotionItemBox.append($dotWrapper);
    $promotionItemBox.append($promotionTitle);
    $promotionItemBox.append($promotionPrice);
    $promotionPrice.append($mainPrice);
    $promotionPrice.append($discountPrice);
    $promotionItemBox.append($favoritesInfo);
    $favoritesInfo.append($availability);
    $favoritesInfo.append($favoritesBtn);
    $favoritesBtn.append($favoritesBtnImg);
    $promotionItemBox.append($promotionBtn);



}

    // Пагнинация

    const slidesImages = document.querySelectorAll('.promotion-img');
    const dotWrapper = document.querySelector('.dot-wrapper');

let currentSlideIndex = 0;

const paginationDots = [];

function createPaginationDot() {
    const divDot = document.createElement('div');
    divDot.className = 'dot';
    dotWrapper.appendChild(divDot);
    paginationDots.push(divDot);
}

function addPaginationDot() {
    slidesImages.forEach(createPaginationDot);
    paginationDots[0].classList.add('active-dot');
    paginationDots.forEach((dot, index) => {
        dot.addEventListener('click', () => changeSlide(index));
    });
}

function addActiveClass() {
    paginationDots[currentSlideIndex].classList.add('active-dot');
}

function removeActiveClass() {
    paginationDots[currentSlideIndex].classList.remove('active-dot');
}

function showSlide () {
    slidesImages[currentSlideIndex].classList.add('promotion-img__block');
}

function hideSlide() {
    slidesImages[currentSlideIndex].classList.remove('promotion-img__block');
}

function changeSlide(slideIndex) {
    hideSlide();
    removeActiveClass();
    currentSlideIndex = slideIndex;
    addActiveClass();
    showSlide();
}

function nextSlides() {
    let newSlideIndex = currentSlideIndex + 1;
    if(newSlideIndex > slidesImages.length - 1) {
        newSlideIndex = 0;
    }
    changeSlide(newSlideIndex);
}

function prevSlide() {
    let newSlideIndex = currentSlideIndex - 1;
    if(newSlideIndex < 0) {
        newSlideIndex = slidesImages.length - 1;
    }
    changeSlide(newSlideIndex);
}

addPaginationDot();





const sliderStart = () => {
    const slideBtn = document.querySelectorAll('.swipe-btn__promotion');
    const slideList = document.querySelector('.promotion-wrapper');

    const maxScrollLeft = slideList.scrollWidth - slideList.clientWidth;

    slideBtn.forEach(btn => {
        btn.addEventListener('click', () => {
            const direction = btn.id === 'prev-swipe-id' ? -1: 1;
            const scrollAmoutn = slideList.clientWidth * direction;
            slideList.scrollBy({left: scrollAmoutn, behavior: 'smooth'});
        });
    });

    const handleSlideButtons = () => {
        slideBtn[0].style.display = slideList.scrollLeft <= 0 ? 'none' : 'block';
        slideBtn[1].style.display = slideList.scrollLeft >= maxScrollLeft ? 'none' : 'block';
    }

    slideList.addEventListener('scroll', () => {
        handleSlideButtons();
    })
}

window.addEventListener('load', sliderStart);

// Слайдер фото товаров, внутри карточки товара

// const prevBtn = document.querySelector('.prev-slide');
// const nextBtn = document.querySelector('.next-slide');
// const slidesImages = document.querySelectorAll('.promotion-img');
// const dotWrapper = document.querySelector('.dot-wrapper');

// let currentSlideIndex = 0;

// const paginationDots = [];

// function createPaginationDot() {
//     const divDot = document.createElement('div');
//     divDot.className = 'dot';
//     dotWrapper.appendChild(divDot);
//     paginationDots.push(divDot);
// }

// function addPaginationDot() {
//     slidesImages.forEach(createPaginationDot);
//     paginationDots[0].classList.add('active-dot');
//     paginationDots.forEach((dot, index) => {
//         dot.addEventListener('click', () => changeSlide(index));
//     });
// }

// function addActiveClass() {
//     paginationDots[currentSlideIndex].classList.add('active-dot');
// }

// function removeActiveClass() {
//     paginationDots[currentSlideIndex].classList.remove('active-dot');
// }

// function showSlide () {
//     slidesImages[currentSlideIndex].classList.add('promotion-img__block');
// }

// function hideSlide() {
//     slidesImages[currentSlideIndex].classList.remove('promotion-img__block');
// }

// function changeSlide(slideIndex) {
//     hideSlide();
//     removeActiveClass();
//     currentSlideIndex = slideIndex;
//     addActiveClass();
//     showSlide();
// }

// function nextSlides() {
//     let newSlideIndex = currentSlideIndex + 1;
//     if(newSlideIndex > slidesImages.length - 1) {
//         newSlideIndex = 0;
//     }
//     changeSlide(newSlideIndex);
// }

// function prevSlide() {
//     let newSlideIndex = currentSlideIndex - 1;
//     if(newSlideIndex < 0) {
//         newSlideIndex = slidesImages.length - 1;
//     }
//     changeSlide(newSlideIndex);
// }

// addPaginationDot();
